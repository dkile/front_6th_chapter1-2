var Oe=Object.defineProperty;var me=t=>{throw TypeError(t)};var _e=(t,e,r)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var j=(t,e,r)=>_e(t,typeof e!="symbol"?e+"":e,r),Y=(t,e,r)=>e.has(t)||me("Cannot "+r);var x=(t,e,r)=>(Y(t,e,"read from private field"),r?r.call(t):e.get(t)),R=(t,e,r)=>e.has(t)?me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),O=(t,e,r,s)=>(Y(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),W=(t,e,r)=>(Y(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const Le="modulepreload",Re=function(t){return"/front_6th_chapter1-2/"+t},pe={},Ie=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=Re(d),d in pe)return;pe[d]=!0;const l=d.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const p=document.createElement("link");if(p.rel=l?"stylesheet":Le,l||(p.as="script"),p.crossOrigin="",p.href=d,i&&p.setAttribute("nonce",i),document.head.appendChild(p),l)return new Promise((A,G)=>{p.addEventListener("load",A),p.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return n.then(c=>{for(const i of c||[])i.status==="rejected"&&o(i.reason);return e().catch(o)})},q=new WeakMap,xe=new Set,ge=new WeakSet;function Pe(t){ge.has(t)||(xe.forEach(e=>{t.addEventListener(e,r=>{var n;let s=r.target;for(;s&&s!==t.parentElement;){const o=(n=q.get(s))==null?void 0:n[e];if(o){o(r);return}s=s.parentElement}})}),ge.add(t))}function te(t,e,r){const s=q.get(t)||{};s[e]=r,q.set(t,s),xe.add(e)}function H(t,e){const r=q.get(t)||{};delete r[e],q.set(t,r)}function re(t,{earlyTermination:e=!0}={}){return new De(t,{earlyTermination:e})}class De{constructor(e,r={}){this.value=e,this.earlyTermination=r.earlyTermination??!0,this.hasTransformed=!1,this.pendingCondition=null}case(e){return this.hasTransformed&&this.earlyTermination?this:(this.pendingCondition=e,this)}to(e){return this.hasTransformed&&this.earlyTermination?this:(this.pendingCondition&&((typeof this.pendingCondition=="function"?this.pendingCondition(this.value):this.pendingCondition)&&(this.value=typeof e=="function"?e(this.value):e,this.hasTransformed=!0),this.pendingCondition=null),this)}default(e){return this.hasTransformed||(this.value=typeof e=="function"?e(this.value):e),this}error(e){if(this.hasTransformed&&this.earlyTermination)return this;if(this.pendingCondition&&(typeof this.pendingCondition=="function"?this.pendingCondition(this.value):this.pendingCondition))throw new Error(e);return this}merge(e){if(!this.hasTransformed){const r=e(),s=r.end();r.hasTransformed&&(this.value=s,this.hasTransformed=!0)}return this}end(){return this.value}}const L=t=>t==null,ke=["autoFocus","autoPlay","async","checked","controls","defer","disabled","hidden","loop","multiple","muted","open","readOnly","required","reversed","selected","autoComplete","capture","defaultChecked","defaultSelected","itemScope","noValidate"];function $(t){return Me(t).merge(()=>qe(t)).default(e=>{const r=document.createElement(e.type);if($e(r,e.props),e.children&&e.children.length>0){const s=$(e.children);r.appendChild(s)}return r}).end()}const Me=t=>re(t,{earlyTermination:!0}).case(e=>L(e)||typeof e=="boolean").to(()=>document.createTextNode("")).case(e=>typeof e=="string"||typeof e=="number").to(e=>document.createTextNode(e.toString())).case(e=>Array.isArray(e)).to(e=>{const r=new DocumentFragment;return e.forEach(s=>{const n=$(s);r.appendChild(n)}),r}),Ue=t=>typeof t=="object"&&typeof t.type=="function",qe=t=>re(t,{earlyTermination:!0}).case(Ue).error("Component should be normalized");function $e(t,e){e&&Object.entries(e).forEach(([r,s])=>{if(r.startsWith("on")){if(typeof s!="function")throw new Error(`Event handler must be a function: ${r}`);te(t,r.substring(2).toLowerCase(),s)}else ke.includes(r)?t[r]=!!s:t.setAttribute(je(r),s)})}const je=t=>{switch(t){case"className":return"class";case"htmlFor":return"for";default:return t}},ve=()=>{const t=new Set;return{subscribe:s=>t.add(s),notify:()=>t.forEach(s=>s())}},We=(t,e=window.localStorage)=>({get:()=>{try{const o=e.getItem(t);return o?JSON.parse(o):null}catch(o){return console.error(`Error parsing storage item for key "${t}":`,o),null}},set:o=>{try{e.setItem(t,JSON.stringify(o))}catch(c){console.error(`Error setting storage item for key "${t}":`,c)}},reset:()=>{try{e.removeItem(t)}catch(o){console.error(`Error removing storage item for key "${t}":`,o)}}}),ae=(t,e)=>{const{subscribe:r,notify:s}=ve();let n=e;return{getState:()=>n,dispatch:i=>{const d=t(n,i);d!==n&&(n=d,s())},subscribe:r}};function a(t,e,...r){return{type:t,props:e,children:r.flat(Number.POSITIVE_INFINITY).filter(s=>!L(s)).filter(s=>s!==!1)}}function J(t){return re(t,{earlyTermination:!0}).case(e=>L(e)||typeof e=="boolean").to("").case(e=>typeof e=="string"||typeof e=="number").to(e=>e.toString()).case(He).to(e=>J(e.type({...e.props,children:e.children}))).case(e=>typeof e=="object"&&e.type&&e.children).to(e=>({...e,children:e.children.map(r=>J(r)).filter(r=>r!=="")})).default(e=>e).end()}const He=t=>typeof t=="object"&&typeof t.type=="function",Fe=(t,e)=>new Set([...t].filter(r=>!e.has(r))),Q=["autoFocus","autoPlay","async","checked","controls","defer","disabled","hidden","loop","multiple","muted","open","readOnly","required","reversed","selected","autoComplete","capture","defaultChecked","defaultSelected","itemScope","noValidate"];class Qe{constructor(){this.operations=[]}schedule(e){this.operations.push(e)}flushSync(){this.operations.forEach(e=>{switch(e.type){case"appendChild":e.parent.appendChild(e.element);break;case"removeChild":e.parent.removeChild(e.element);break;case"replaceChild":e.parent.replaceChild(e.newElement,e.oldElement);break;case"replaceElement":this.replaceWithEventPreservation(e.existingElement,e.newElement);break;case"textContent":e.element.textContent=e.value;break}}),this.operations=[]}replaceWithEventPreservation(e,r){e.parentNode.replaceChild(r,e)}}function Be(t,e){e&&Object.entries(e).forEach(([r,s])=>{if(r.startsWith("on")){if(typeof s!="function")throw new Error(`Event handler must be a function: ${r}`);te(t,r.substring(2).toLowerCase(),s)}else Q.includes(r)?t[r]=!!s:t.setAttribute(U(r),s)})}const U=t=>{switch(t){case"className":return"class";case"htmlFor":return"for";default:return t.toLowerCase()}};function Ve(t,e,r){if(L(r)){Be(t,e);return}if(L(e)){Object.keys(r).forEach(n=>{n.startsWith("on")?H(t,n.substring(2).toLowerCase(),r[n]):Q.includes(n)?t[n]=!1:t.removeAttribute(U(n))});return}Fe(new Set(Object.keys(r)),new Set(Object.keys(e))).forEach(n=>{n.startsWith("on")?H(t,n.substring(2).toLowerCase(),r[n]):Q.includes(n)?t[n]=!1:t.removeAttribute(U(n))}),Object.keys(e).forEach(n=>{e[n]!==r[n]&&(n.startsWith("on")?(H(t,n.substring(2).toLowerCase(),r[n]),te(t,n.substring(2).toLowerCase(),e[n])):Q.includes(n)?t[n]=!!e[n]:e[n]?t.setAttribute(U(n),e[n]):t.removeAttribute(U(n)))}),Object.keys(r).forEach(n=>{n.startsWith("on")&&!(n in e)&&H(t,n.substring(2).toLowerCase(),r[n])})}function we(t,e,r,s=0,n=null){const o=!n;o&&(n=new Qe),ze(t,e,r,s,n),o&&n.flushSync()}function ze(t,e,r,s=0,n){var o,c,i,d;if(L(r)){const l=$(e);n.schedule({type:"appendChild",parent:t,element:l});return}if(L(e)){n.schedule({type:"removeChild",parent:t,element:t.childNodes[s]});return}if(typeof r=="string"&&typeof e=="string"){r!==e&&n.schedule({type:"textContent",element:t.childNodes[s],value:e});return}if(e.type===(r==null?void 0:r.type)){const l=t.childNodes[s];Ve(l,e.props,r.props);const u=Math.max(((o=e.children)==null?void 0:o.length)||0,((c=r.children)==null?void 0:c.length)||0);for(let p=0;p<u;p++)we(l,(i=e.children)==null?void 0:i.at(p),(d=r.children)==null?void 0:d.at(p),p,n)}else{const l=t.childNodes[s],u=$(e);n.schedule({type:"replaceElement",existingElement:l,newElement:u,parent:t,index:s})}}const X=new WeakMap,Ge=t=>!X.has(t);function Ye(t,e){const r=J(t);if(Ge(e)){const s=$(r);e.appendChild(s),X.set(e,{hasRendered:!0,lastVNode:r})}else{const s=X.get(e);we(e,r,s.lastVNode),s.lastVNode=r}Pe(e)}var P,S,_,C,D,B;const E=class E{constructor(e=""){R(this,D);R(this,P);R(this,S);R(this,_,ve());R(this,C);O(this,P,new Map),O(this,S,null),O(this,C,e.replace(/\/$/,"")),window.addEventListener("popstate",()=>{O(this,S,W(this,D,B).call(this)),x(this,_).notify()}),document.addEventListener("click",r=>{if(r.target.closest("[data-link]")){r.preventDefault();const s=r.target.getAttribute("href")||r.target.closest("[data-link]").getAttribute("href");s&&this.push(s)}})}get baseUrl(){return x(this,C)}get query(){return E.parseQuery(window.location.search)}set query(e){const r=E.getUrl(e,x(this,C));this.push(r)}get params(){var e;return((e=x(this,S))==null?void 0:e.params)??{}}get route(){return x(this,S)}get target(){var e;return(e=x(this,S))==null?void 0:e.handler}subscribe(e){x(this,_).subscribe(e)}addRoute(e,r){const s=[],n=e.replace(/:\w+/g,c=>(s.push(c.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),o=new RegExp(`^${x(this,C)}${n}$`);x(this,P).set(e,{regex:o,paramNames:s,handler:r})}push(e){try{let r=e.startsWith(x(this,C))?e:x(this,C)+(e.startsWith("/")?e:"/"+e);`${window.location.pathname}${window.location.search}`!==r&&window.history.pushState(null,"",r),O(this,S,W(this,D,B).call(this,r)),x(this,_).notify()}catch(r){console.error("라우터 네비게이션 오류:",r)}}start(){O(this,S,W(this,D,B).call(this)),x(this,_).notify()}};P=new WeakMap,S=new WeakMap,_=new WeakMap,C=new WeakMap,D=new WeakSet,B=function(e=window.location.pathname){const{pathname:r}=new URL(e,window.location.origin);for(const[s,n]of x(this,P)){const o=r.match(n.regex);if(o){const c={};return n.paramNames.forEach((i,d)=>{c[i]=o[d+1]}),{...n,params:c,path:s}}}return null},j(E,"parseQuery",(e=window.location.search)=>{const r=new URLSearchParams(e),s={};for(const[n,o]of r)s[n]=o;return s}),j(E,"stringifyQuery",e=>{const r=new URLSearchParams;for(const[s,n]of Object.entries(e))n!=null&&n!==""&&r.set(s,String(n));return r.toString()}),j(E,"getUrl",(e,r="")=>{const n={...E.parseQuery(),...e};Object.keys(n).forEach(c=>{(n[c]===null||n[c]===void 0||n[c]==="")&&delete n[c]});const o=E.stringifyQuery(n);return`${r}${window.location.pathname.replace(r,"")}${o?`?${o}`:""}`});let Z=E;const h={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},f={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},v={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},se={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:{}},Ke=(t,e)=>{switch(e.type){case h.SET_STATUS:return{...t,status:e.payload};case h.SET_CATEGORIES:return{...t,categories:e.payload,loading:!1,error:null,status:"done"};case h.SET_PRODUCTS:return{...t,products:e.payload.products,totalCount:e.payload.totalCount,loading:!1,error:null,status:"done"};case h.ADD_PRODUCTS:return{...t,products:[...t.products,...e.payload.products],totalCount:e.payload.totalCount,loading:!1,error:null,status:"done"};case h.SET_LOADING:return{...t,loading:e.payload};case h.SET_ERROR:return{...t,error:e.payload,loading:!1,status:"done"};case h.SET_CURRENT_PRODUCT:return{...t,currentProduct:e.payload,loading:!1,error:null,status:"done"};case h.SET_RELATED_PRODUCTS:return{...t,relatedProducts:e.payload,status:"done"};case h.SETUP:return{...t,...e.payload};default:return t}},y=ae(Ke,se),ne=We("shopping_cart"),Ne={items:[],selectedAll:!1},Je=(t,e)=>t.find(r=>r.id===e),Xe=(t,e)=>{const r=ne.get()??Ne;switch(e.type){case f.ADD_ITEM:{const{product:s,quantity:n=1}=e.payload;if(Je(r.items,s.productId))return{...r,items:r.items.map(c=>c.id===s.productId?{...c,quantity:c.quantity+n}:c)};{const c={id:s.productId,title:s.title,image:s.image,price:parseInt(s.lprice),quantity:n,selected:!1};return{...r,items:[...r.items,c]}}}case f.REMOVE_ITEM:return{...r,items:r.items.filter(s=>s.id!==e.payload)};case f.UPDATE_QUANTITY:{const{productId:s,quantity:n}=e.payload;return{...r,items:r.items.map(o=>o.id===s?{...o,quantity:Math.max(1,n)}:o)}}case f.CLEAR_CART:return{...r,items:[],selectedAll:!1};case f.TOGGLE_SELECT:{const s=e.payload,n=r.items.map(c=>c.id===s?{...c,selected:!c.selected}:c),o=n.length>0&&n.every(c=>c.selected);return{...r,items:n,selectedAll:o}}case f.SELECT_ALL:{const s=r.items.map(n=>({...n,selected:!0}));return{...r,items:s,selectedAll:!0}}case f.DESELECT_ALL:{const s=r.items.map(n=>({...n,selected:!1}));return{...r,items:s,selectedAll:!1}}case f.REMOVE_SELECTED:return{...r,items:r.items.filter(s=>!s.selected),selectedAll:!1};case f.LOAD_FROM_STORAGE:return{...r,...e.payload};default:return r}},N=ae(Xe,Ne),Ze={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},et=(t,e)=>{switch(e.type){case v.OPEN_CART_MODAL:return{...t,cartModal:{isOpen:!0}};case v.CLOSE_CART_MODAL:return{...t,cartModal:{isOpen:!1}};case v.HIDE_TOAST:return{...t,toast:{...t.toast,isVisible:!1}};case v.SHOW_TOAST:return{...t,toast:{isVisible:!0,message:e.payload.message,type:e.payload.type||"info"}};default:return t}},w=ae(et,Ze),oe="/front_6th_chapter1-2/",m=new Z(oe),K=new WeakMap,I={current:null,previous:null},tt={mount:null,unmount:null,watches:[],deps:[],mounted:!1},ce=t=>(K.has(t)||K.set(t,{...tt}),K.get(t)),rt=(t,e)=>!Array.isArray(t)||!Array.isArray(e)?!1:t.length!==e.length?!0:t.some((r,s)=>r!==e[s]),at=t=>{var r;const e=ce(t);e.mounted||(console.log("🚀 페이지 마운트:",t.name),(r=e.mount)==null||r.call(e),e.mounted=!0,e.deps=[])},st=t=>{var r;const e=ce(t);e.mounted&&(console.log("🔻 페이지 언마운트:",t.name),(r=e.unmount)==null||r.call(e),e.mounted=!1)},Se=({onMount:t,onUnmount:e,watches:r}={},s)=>{const n=ce(s);return typeof t=="function"&&(n.mount=t),typeof e=="function"&&(n.unmount=e),Array.isArray(r)&&(n.watches=typeof r[0]=="function"?[r]:r),(...o)=>{const c=I.current!==s;return I.current&&c&&st(I.current),I.previous=I.current,I.current=s,c?at(s):n.watches&&n.watches.forEach(([i,d],l)=>{const u=i();rt(u,n.deps[l])&&(console.log(`📊 의존성 변경 감지 (${s.name}):`,n.deps[l],"→",u),d()),n.deps[l]=Array.isArray(u)?[...u]:[]}),s(...o)}};async function le(t={}){const{limit:e=20,search:r="",category1:s="",category2:n="",sort:o="price_asc"}=t,c=t.current??t.page??1,i=new URLSearchParams({page:c.toString(),limit:e.toString(),...r&&{search:r},...s&&{category1:s},...n&&{category2:n},sort:o});return await(await fetch(`/api/products?${i}`)).json()}async function nt(t){return await(await fetch(`/api/products/${t}`)).json()}async function ot(){return await(await fetch("/api/categories")).json()}const ct=async()=>{m.query={current:void 0},y.dispatch({type:h.SETUP,payload:{...se,loading:!0,status:"pending"}});try{const[{products:t,pagination:{total:e}},r]=await Promise.all([le(m.query),ot()]);y.dispatch({type:h.SETUP,payload:{products:t,categories:r,totalCount:e,loading:!1,status:"done"}})}catch(t){throw y.dispatch({type:h.SET_ERROR,payload:t.message}),t}},ie=async(t=!0)=>{try{y.dispatch({type:h.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:e,pagination:{total:r}}=await le(m.query),s={products:e,totalCount:r};if(t){y.dispatch({type:h.SET_PRODUCTS,payload:s});return}y.dispatch({type:h.ADD_PRODUCTS,payload:s})}catch(e){throw y.dispatch({type:h.SET_ERROR,payload:e.message}),e}},lt=async()=>{const t=y.getState();!(t.products.length<t.totalCount)||t.loading||(m.query={current:Number(m.query.current??1)+1},await ie(!1))},it=t=>{m.query={search:t,current:1}},V=t=>{m.query={...t,current:1}},dt=t=>{m.query={sort:t,current:1}},ut=t=>{m.query={limit:t,current:1}},he=async t=>{try{const e=y.getState().currentProduct;if(t===(e==null?void 0:e.productId)){e.category2&&await ye(e.category2,t);return}y.dispatch({type:h.SETUP,payload:{...se,currentProduct:null,loading:!0,status:"pending"}});const r=await nt(t);y.dispatch({type:h.SET_CURRENT_PRODUCT,payload:r}),r.category2&&await ye(r.category2,t)}catch(e){throw console.error("상품 상세 페이지 로드 실패:",e),y.dispatch({type:h.SET_ERROR,payload:e.message}),e}},ye=async(t,e)=>{try{const n=(await le({category2:t,limit:20,page:1})).products.filter(o=>o.productId!==e);y.dispatch({type:h.SET_RELATED_PRODUCTS,payload:n})}catch(r){console.error("관련 상품 로드 실패:",r),y.dispatch({type:h.SET_RELATED_PRODUCTS,payload:[]})}},mt=()=>{try{const t=ne.get();t&&N.dispatch({type:f.LOAD_FROM_STORAGE,payload:t})}catch(t){console.error("장바구니 로드 실패:",t)}},T=()=>{try{const t=N.getState();ne.set(t)}catch(t){console.error("장바구니 저장 실패:",t)}},Ee=(t,e=1)=>{N.dispatch({type:f.ADD_ITEM,payload:{product:t,quantity:e}}),T(),w.dispatch({type:v.SHOW_TOAST,payload:{message:"장바구니에 추가되었습니다",type:"success"}}),setTimeout(()=>{w.dispatch({type:v.HIDE_TOAST})},3e3)},pt=t=>{N.dispatch({type:f.REMOVE_ITEM,payload:t}),T()},de=(t,e)=>{N.dispatch({type:f.UPDATE_QUANTITY,payload:{productId:t,quantity:e}}),T()},gt=t=>{N.dispatch({type:f.TOGGLE_SELECT,payload:t}),T()},ht=()=>{N.dispatch({type:f.SELECT_ALL}),T()},yt=()=>{N.dispatch({type:f.DESELECT_ALL}),T()},ft=()=>{N.dispatch({type:f.REMOVE_SELECTED}),T(),w.dispatch({type:v.SHOW_TOAST,payload:{message:"선택된 상품들이 삭제되었습니다",type:"info"}}),setTimeout(()=>{w.dispatch({type:v.HIDE_TOAST})},3e3)},bt=()=>{N.dispatch({type:f.CLEAR_CART}),T(),w.dispatch({type:v.SHOW_TOAST,payload:{message:"장바구니가 비워졌습니다",type:"info"}}),setTimeout(()=>{w.dispatch({type:v.HIDE_TOAST})},3e3)},g=({src:t,...e})=>{const r=String(oe+t).replace("//","/");return a("img",{src:r,...e})},xt=[10,20,50,100],vt=[{value:"price_asc",label:"가격 낮은순"},{value:"price_desc",label:"가격 높은순"},{value:"name_asc",label:"이름순"},{value:"name_desc",label:"이름 역순"}],wt=async t=>{if(t.key==="Enter"){const e=t.target.value.trim();try{await it(e)}catch(r){console.error("검색 실패:",r)}}},Nt=async t=>{const e=parseInt(t.target.value);try{await ut(e)}catch(r){console.error("상품 수 변경 실패:",r)}},St=async t=>{const e=t.target.value;try{await dt(e)}catch(r){console.error("정렬 변경 실패:",r)}},fe=async t=>{const e=t.target.getAttribute("data-breadcrumb");try{if(e==="reset")await V({category1:"",category2:""});else if(e==="category1"){const r=t.target.getAttribute("data-category1");await V({category1:r,category2:""})}}catch(r){console.error("브레드크럼 네비게이션 실패:",r)}},Et=async t=>{const e=t.target.getAttribute("data-category1");if(e)try{await V({category1:e,category2:""})}catch(r){console.error("1depth 카테고리 선택 실패:",r)}},Ct=async t=>{const e=t.target.getAttribute("data-category1"),r=t.target.getAttribute("data-category2");if(!(!e||!r))try{await V({category1:e,category2:r})}catch(s){console.error("2depth 카테고리 선택 실패:",s)}};function Tt({searchQuery:t="",limit:e=20,sort:r="price_asc",category:s={},categories:n={}}){const o=Object.keys(n).length>0?Object.keys(n):[],c=xt.map(l=>a("option",{key:l,value:l,selected:Number(e)===l},l,"개")),i=vt.map(({value:l,label:u})=>a("option",{key:l,value:l,selected:r===l},u)),d=o.map(l=>a("button",{key:l,"data-category1":l,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:Et},l));return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},a("div",{className:"mb-4"},a("div",{className:"relative"},a("input",{type:"text",id:"search-input",placeholder:"상품명을 검색해보세요...",value:t,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:wt}),a("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a(g,{src:"/search-icon.svg",alt:"검색",className:"h-5 w-5 text-gray-400"})))),a("div",{className:"space-y-3"},a("div",{className:"space-y-2"},a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"카테고리:"),["전체",s.category1,s.category2].filter((l,u)=>u===0||!!l).map((l,u)=>{if(l==="전체")return a("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:fe},"전체");if(u===1)return a("button",{key:l,"data-breadcrumb":"category1","data-category1":l,className:"text-xs hover:text-blue-800 hover:underline",onClick:fe},l);if(u===2)return a("span",{key:l,className:"text-xs text-gray-600 cursor-default"},l)}).reduce((l,u,p)=>(p>0&&l.push(a("span",{className:"text-xs text-gray-500"},">")),l.push(u),l),[])),!s.category1&&a("div",{className:"flex flex-wrap gap-2"},o.length>0?d:a("div",{className:"text-sm text-gray-500 italic"},"카테고리 로딩 중...")),s.category1&&n[s.category1]&&a("div",{className:"space-y-2"},a("div",{className:"flex flex-wrap gap-2"},Object.keys(n[s.category1]).map(l=>{const u=s.category2===l;return a("button",{key:l,"data-category1":s.category1,"data-category2":l,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${u?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:Ct},l)})))),a("div",{className:"flex gap-2 items-center justify-between"},a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"개수:"),a("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:Nt},c)),a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"정렬:"),a("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:St},i)))))}const At=t=>{const e=t.target.closest("[data-product-id]"),r=e.getAttribute("data-product-id"),s=e.previousElementSibling;if(r&&s){const n=parseInt(s.value)+1;s.value=n,de(r,n)}},Ot=t=>{const e=t.target.closest("[data-product-id]"),r=e.getAttribute("data-product-id"),s=e.nextElementSibling;if(r&&s){const n=Math.max(1,parseInt(s.value)-1);s.value=n,de(r,n)}},_t=(t,e)=>{const r=Math.max(1,parseInt(e)||1);t&&de(t,r)};function Lt({id:t,title:e,image:r,price:s,quantity:n,selected:o}){const c=s*n;return a("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":t},a("label",{className:"flex items-center mr-3"},a("input",{type:"checkbox",checked:o,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":t,onChange:()=>gt(t)})),a("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},a("img",{src:r,alt:e,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":t})),a("div",{className:"flex-1 min-w-0"},a("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":t},e),a("p",{className:"text-sm text-gray-600 mt-1"},s.toLocaleString(),"원"),a("div",{className:"flex items-center mt-2"},a("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":t,onClick:Ot},a(g,{src:"/minus-icon.svg",alt:"감소",className:"w-3 h-3"})),a("input",{type:"number",value:n,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":t,onChange:i=>_t(t,i.target.value)}),a("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":t,onClick:At},a(g,{src:"/plus-icon.svg",alt:"증가",className:"w-3 h-3"})))),a("div",{className:"text-right ml-3"},a("p",{className:"text-sm font-medium text-gray-900"},c.toLocaleString(),"원"),a("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":t,onClick:()=>pt(t)},"삭제")))}const be=()=>{w.dispatch({type:v.CLOSE_CART_MODAL})},Rt=t=>{t.target.checked?ht():yt()},It=()=>{w.dispatch({type:v.SHOW_TOAST,payload:{message:"구매 기능은 추후 구현 예정입니다.",type:"info"}})};let ee=!1;const Ce=t=>{t.key==="Escape"&&(w.getState().cartModal.isOpen&&w.dispatch({type:v.CLOSE_CART_MODAL}),document.removeEventListener("keydown",Ce),ee=!1)},Pt=()=>{ee||(document.addEventListener("keydown",Ce),ee=!0)};function Dt({items:t=[],selectedAll:e=!1,isOpen:r=!1}){if(Pt(),!r)return"";const s=t.filter(i=>i.selected),n=s.length,o=t.reduce((i,d)=>i+d.price*d.quantity,0),c=s.reduce((i,d)=>i+d.price*d.quantity,0);return a("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal"},a("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay",onClick:be}),a("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},a("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden"},a("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},a("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},a(g,{src:"/cart-icon.svg",alt:"장바구니",className:"w-5 h-5 mr-2"}),"장바구니",t.length>0&&a("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",t.length,")")),a("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onClick:be},a(g,{src:"/close-icon.svg",alt:"닫기",className:"w-6 h-6"}))),t.length===0?a("div",{className:"flex-1 flex items-center justify-center p-8"},a("div",{className:"text-center"},a("div",{className:"text-gray-400 mb-4"},a(g,{src:"/empty-cart-icon.svg",alt:"빈 장바구니",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"장바구니가 비어있습니다"),a("p",{className:"text-gray-600"},"원하는 상품을 담아보세요!"))):a("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},a("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},a("label",{className:"flex items-center text-sm text-gray-700"},a("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:e,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:Rt}),"전체선택 (",t.length,"개)")),a("div",{className:"flex-1 overflow-y-auto"},a("div",{className:"p-4 space-y-4"},t.map(i=>a(Lt,{...i}))))),t.length>0&&a("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},n>0&&a("div",{className:"flex justify-between items-center mb-3 text-sm"},a("span",{className:"text-gray-600"},"선택한 상품 (",n,"개)"),a("span",{className:"font-medium"},c.toLocaleString(),"원")),a("div",{className:"flex justify-between items-center mb-4"},a("span",{className:"text-lg font-bold text-gray-900"},"총 금액"),a("span",{className:"text-xl font-bold text-blue-600"},o.toLocaleString(),"원")),a("div",{className:"space-y-2"},n>0&&a("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:ft},"선택한 상품 삭제 (",n,"개)"),a("div",{className:"flex gap-2"},a("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:bt},"전체 비우기"),a("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:It},"구매하기")))))))}const kt=({error:t})=>a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},a("div",{className:"text-center"},a("div",{className:"text-red-500 mb-4"},a(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),a("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),a("p",{className:"text-gray-600 mb-4"},t||"요청하신 상품이 존재하지 않습니다."),a("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"이전 페이지"),a("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"홈으로"))),Mt=()=>{w.dispatch({type:v.HIDE_TOAST})};function Ut({isVisible:t=!1,message:e="",type:r="info"}){if(!t)return"";const s=()=>{switch(r){case"success":return{bg:"bg-green-600",icon:a(g,{src:"/success-icon.svg",alt:"성공",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:a(g,{src:"/error-icon.svg",alt:"오류",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:a(g,{src:"/warning-icon.svg",alt:"경고",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:a(g,{src:"/info-icon.svg",alt:"정보",className:"w-5 h-5"})}}},{bg:n,icon:o}=s();return a("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},a("div",{className:`${n} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},a("div",{className:"flex-shrink-0"},o),a("p",{className:"text-sm font-medium"},e),a("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:Mt},a(g,{src:"/close-icon-white.svg",alt:"닫기",className:"w-4 h-4"}))))}function qt(){return a("h1",{className:"text-xl font-bold text-gray-900"},a("a",{href:"/","data-link":"/"},"쇼핑몰"))}function $t(){return a("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},a("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},a("p",null,"© ",new Date().getFullYear()," 항해플러스 프론트엔드 쇼핑몰")))}const jt=async t=>{const r=y.getState().products.find(s=>s.productId===t);r&&Ee(r,1)};function Wt({productId:t,title:e,image:r,lprice:s,brand:n,onClick:o}){const c=Number(s),i=d=>{d.preventDefault(),o(t)};return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":t},a("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image",onClick:i},a("img",{src:r,alt:e,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"})),a("div",{className:"p-3"},a("div",{className:"cursor-pointer product-info mb-3",onClick:i},a("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},e),a("p",{className:"text-xs text-gray-500 mb-2"},n),a("p",{className:"text-lg font-bold text-gray-900"},c.toLocaleString(),"원")),a("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":t,onClick:()=>jt(t)},"장바구니 담기")))}function Ht(){return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},a("div",{className:"aspect-square bg-gray-200"}),a("div",{className:"p-3"},a("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),a("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),a("div",{className:"h-8 bg-gray-200 rounded"})))}const Ft=async()=>{try{await ie(!0)}catch(t){console.error("재시도 실패:",t)}},Qt=async t=>{m.push(`/product/${t}`)};function Bt({products:t=[],loading:e=!1,error:r=null,totalCount:s=0,hasMore:n=!0}){return r?a("div",{className:"text-center py-12"},a("div",{className:"text-red-500 mb-4"},a(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"오류가 발생했습니다"),a("p",{className:"text-gray-600 mb-4"},r),a("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:Ft},"다시 시도")):!e&&t.length===0?a("div",{className:"text-center py-12"},a("div",{className:"text-gray-400 mb-4"},a(g,{src:"/search-large-icon.svg",alt:"검색",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),a("p",{className:"text-gray-600"},"다른 검색어를 시도해보세요.")):a("div",null,s>0&&a("div",{className:"mb-4 text-sm text-gray-600"},"총 ",a("span",{className:"font-medium text-gray-900"},s.toLocaleString(),"개"),"의 상품"),a("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},t.map(o=>a(Wt,{...o,onClick:Qt})),e&&Array.from({length:6}).map(()=>a(Ht,null))),e&&t.length>0&&a("div",{className:"text-center py-4"},a("div",{className:"inline-flex items-center"},a(g,{src:"/loading-icon.svg",alt:"로딩",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),a("span",{className:"text-sm text-gray-600"},"상품을 불러오는 중..."))),!n&&t.length>0&&!e&&a("div",{className:"text-center py-4 text-sm text-gray-500"},"모든 상품을 확인했습니다"),a("div",{id:"scroll-trigger",className:"h-4"}))}const Vt=async t=>{const e=new URLSearchParams(t).toString();m.push(`/?${e}`)},zt=async()=>{const t=y.getState().currentProduct,e={category1:t==null?void 0:t.category1,category2:t==null?void 0:t.category2,currentPage:1},r=new URLSearchParams(e).toString();m.push(`/?${r}`)},Gt=()=>{const t=document.getElementById("quantity-input");if(t){const e=parseInt(t.getAttribute("max"))||100;t.value=Math.min(e,parseInt(t.value)+1)}},Yt=()=>{const t=document.getElementById("quantity-input");t&&(t.value=Math.max(1,parseInt(t.value)-1))},Kt=()=>{const t=document.getElementById("quantity-input"),e=t?parseInt(t.value):1,s=y.getState().currentProduct;s&&(console.log("🛒 상품 상세 페이지에서 장바구니 추가:",s),Ee(s,e))};function Jt({product:t,relatedProducts:e=[]}){const{productId:r,title:s,image:n,lprice:o,brand:c,description:i="",rating:d=0,reviewCount:l=0,stock:u=100,category1:p,category2:A}=t,G=Number(o),k=[];return p&&k.push({name:p,category:"category1",value:p}),A&&k.push({name:A,category:"category2",value:A}),a("div",null,k.length>0&&a("nav",{className:"mb-4"},a("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},a("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"홈"),k.map((b,M)=>[a(g,{key:`${b.category}-icon`,src:"/chevron-right-icon.svg",alt:"오른쪽 화살표",className:"w-4 h-4 text-gray-400"}),a("button",{key:`${b.category}-btn`,className:"breadcrumb-link",[`data-${b.category}`]:b.value,onClick:()=>Vt(M===0?{category1:b.value}:{category1:k[M-1].value,category2:b.value})},b.name)]).flat())),a("div",{className:"bg-white rounded-lg shadow-sm mb-6"},a("div",{className:"p-4"},a("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},a("img",{src:n,alt:s,className:"w-full h-full object-cover product-detail-image"})),a("div",null,a("p",{className:"text-sm text-gray-600 mb-1"},c),a("h1",{className:"text-xl font-bold text-gray-900 mb-3"},s),d>0&&a("div",{className:"flex items-center mb-3"},a("div",{className:"flex items-center"},Array(5).fill(0).map((b,M)=>a(g,{key:M,src:"/star-icon.svg",alt:"별점",className:`w-4 h-4 ${M<d?"text-yellow-400":"text-gray-300"}`}))),a("span",{className:"ml-2 text-sm text-gray-600"},d,".0 (",l.toLocaleString(),"개 리뷰)")),a("div",{className:"mb-4"},a("span",{className:"text-2xl font-bold text-blue-600"},G.toLocaleString(),"원")),a("div",{className:"text-sm text-gray-600 mb-4"},"재고 ",u.toLocaleString(),"개"),i&&a("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},i))),a("div",{className:"border-t border-gray-200 p-4"},a("div",{className:"flex items-center justify-between mb-4"},a("span",{className:"text-sm font-medium text-gray-900"},"수량"),a("div",{className:"flex items-center"},a("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:Yt},a(g,{src:"/quantity-minus-icon.svg",alt:"수량 감소",className:"w-4 h-4"})),a("input",{type:"number",id:"quantity-input",value:"1",min:"1",max:u,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),a("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:Gt},a(g,{src:"/quantity-plus-icon.svg",alt:"수량 증가",className:"w-4 h-4"})))),a("button",{id:"add-to-cart-btn","data-product-id":r,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:Kt},"장바구니 담기"))),a("div",{className:"mb-6"},a("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:zt},"상품 목록으로 돌아가기")),e.length>0&&a("div",{className:"bg-white rounded-lg shadow-sm"},a("div",{className:"p-4 border-b border-gray-200"},a("h2",{className:"text-lg font-bold text-gray-900"},"관련 상품"),a("p",{className:"text-sm text-gray-600"},"같은 카테고리의 다른 상품들")),a("div",{className:"p-4"},a("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},e.slice(0,20).map(b=>a("div",{key:b.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":b.productId,onClick:()=>m.push(`/product/${b.productId}`)},a("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},a("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover",loading:"lazy"})),a("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},b.title),a("p",{className:"text-sm font-bold text-blue-600"},Number(b.lprice).toLocaleString(),"원")))))))}const Xt=(t=200)=>{const e=window.pageYOffset||document.documentElement.scrollTop,r=window.innerHeight,s=document.documentElement.scrollHeight;return e+r>=s-t},Zt=t=>{let e=!1;return(...r)=>{e||(e=!0,queueMicrotask(()=>{e=!1,t(...r)}))}},er=()=>{w.dispatch({type:v.OPEN_CART_MODAL})},ue=({headerLeft:t,children:e})=>{const r=N.getState(),{cartModal:s,toast:n}=w.getState(),o=r.items.length,c=a("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},o>99?"99+":o);return a("div",{className:"min-h-screen bg-gray-50"},a("header",{className:"bg-white shadow-sm sticky top-0 z-40"},a("div",{className:"max-w-md mx-auto px-4 py-4"},a("div",{className:"flex items-center justify-between"},t,a("div",{className:"flex items-center space-x-2"},a("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onClick:er},a(g,{src:"/cart-header-icon.svg",alt:"장바구니",className:"w-6 h-6"}),o>0&&c))))),a("main",{className:"max-w-md mx-auto px-4 py-4"},e),a(Dt,{...r,isOpen:s.isOpen}),a(Ut,{...n}),a($t,null))},Te=a("h1",{className:"text-xl font-bold text-gray-900"},a("a",{href:"/","data-link":"/"},"쇼핑몰"));console.log(Te);let z=!1;const Ae=async()=>{var t;if(((t=m.route)==null?void 0:t.path)==="/"&&Xt(200)){const e=y.getState(),r=e.products.length<e.totalCount;if(e.loading||!r)return;try{await lt()}catch(s){console.error("무한 스크롤 로드 실패:",s)}}},tr=()=>{z||(window.addEventListener("scroll",Ae),z=!0)},rr=()=>{z&&(window.removeEventListener("scroll",Ae),z=!1)},ar=Se({onMount:()=>{tr(),ct()},onUnmount:()=>{rr()},watches:[()=>{const{search:t,limit:e,sort:r,category1:s,category2:n}=m.query;return[t,e,r,s,n]},()=>ie(!0)]},()=>{console.log("🏠 홈 페이지 로드");const t=y.getState(),{search:e,limit:r,sort:s,category1:n,category2:o}=m.query,{products:c,loading:i,error:d,totalCount:l,categories:u}=t,p={category1:n,category2:o},A=c.length<l;return a(ue,{headerLeft:Te},a(Tt,{searchQuery:e,category:p,sort:s,limit:r,categories:u}),a("div",{className:"mb-6"},a(Bt,{products:c,loading:i,error:d,totalCount:l,hasMore:A})))}),sr=Se({onMount:()=>{he(m.params.id)},watches:[()=>[m.params.id],()=>he(m.params.id)]},()=>{const{currentProduct:t,relatedProducts:e=[],error:r,loading:s}=y.getState();return a(ue,{headerLeft:a("div",{className:"flex items-center space-x-3"},a("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},a(g,{src:"/back-icon.svg",alt:"뒤로",className:"w-6 h-6"})),a("h1",{className:"text-lg font-bold text-gray-900"},"상품 상세"))},a("div",{className:"min-h-screen bg-gray-50 p-4"},s?a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},a("div",{className:"text-center"},a("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a("p",{className:"text-gray-600"},"상품 정보를 불러오는 중..."))):r&&!t?a(kt,{error:r}):a(Jt,{product:t,relatedProducts:e})))}),nr=()=>ue({headerLeft:qt(),children:a("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},a(g,{src:"/404.svg",alt:"페이지를 찾을 수 없습니다"}),a("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"홈으로"))});m.addRoute("/",ar);m.addRoute("/product/:id",sr);m.addRoute(".*",nr);const F=Zt(()=>{const t=document.getElementById("root");if(!t)return;const e=m.target;Ye(a(e,null),t)});function or(){y.subscribe(F),N.subscribe(F),w.subscribe(F),m.subscribe(F)}const cr=()=>Ie(async()=>{const{worker:t}=await import("./browser-ipwmi47v.js");return{worker:t}},[]).then(({worker:t})=>t.start({serviceWorker:{url:`${oe}mockServiceWorker.js`},onUnhandledRequest:"bypass"}));function lr(){console.log("🚀 애플리케이션이 시작되었습니다."),console.log("✅ MSW 워커 시작 완료"),mt(),console.log("✅ 장바구니 데이터 복원 완료"),or(),console.log("✅ 렌더링 시스템 초기화 완료"),m.start(),console.log("✅ 렌더링 설정 완료"),console.log("🎉 애플리케이션 초기화 완료!")}cr().then(lr);
